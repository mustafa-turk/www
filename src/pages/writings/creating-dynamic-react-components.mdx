import Layout from "components/writings/layout";

export const metadata = {
  title: "Creating React Components Dynamically",
  date: "27/01/2023",
};

In this guide, we will use `React.createElement()` and build the component based on some JSON config.

&nbsp;

The first part is defining the JSON structure. This can be a local JSON file or an API response you have fetched from somewhere.

&nbsp;

In this example, I will go with the following structure:

```json
{
  "accounts": [
    {
      "key": "twitter",
      "color": "blue"
    },
    {
      "key": "youtube",
      "color": "red"
    }
  ]
}
```

We will use this structure later to render our components.

&nbsp;

The next step will be mapping the account keys to components. We will create an object for this:

```js
import { TwitterIcon, YoutubeIcon } from "@/icons";

const KeysToComponentMap = {
  twitter: TwitterIcon,
  youtube: YoutubeIcon,
};
```

Now that we have a mapped object that holds our components, we will create a function that will take our JSON structure as input and will return a React component:

```js
function renderer(config) {
  if (typeof KeysToComponentMap[config.key] !== "undefined") {
    return React.createElement(KeysToComponentMap[config.key], {
      fill: config.color,
      size: "16px",
    });
  }
}
```

In this function, we are first checking if the key from the config we have passed exists in our `KeysToComponentMap` object. In case this is true, we will call the `createElement` method from React and pass our component, together with some props like `fill` and `size`.

&nbsp;

The final code will look like the following:

```js
import accounts from "@/path-to-json-file";

const KeysToComponentMap = {
  twitter: TwitterIcon,
  youtube: YoutubeIcon,
};

function renderer(config) {
  if (typeof KeysToComponentMap[config.type] !== "undefined") {
    return React.createElement(KeysToComponentMap[config.type], {
      fill: config.color,
      size: "16px",
    });
  }
}

const MyComponent = () => {
  return (
    <div>
      {
        accounts.map((account) => {
          return renderer(link);
        });
      }
    </div>
  );
}
```

export default ({ children }) => (
  <Layout metadata={metadata}>{children}</Layout>
);
